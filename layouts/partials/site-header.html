<script>
  performance.mark("header rendering start");
</script>

{{ $featured_image := .Param "featured_image" }}
{{ $featured_image_small := .Param "featured_image_small" }}
{{ $featured_image_medium := .Param "featured_image_medium" }}
{{ $featured_image_large := .Param "featured_image_large" }}
{{ if $featured_image }}
  {{/* Trimming the slash and adding absURL make sure the image works no matter where our site lives */}}
  {{ $featured_image := (trim $featured_image "/") | absURL }}
  {{ $featured_image_small := (trim $featured_image_small "/") | absURL }}
  {{ $featured_image_medium := (trim $featured_image_medium "/") | absURL }}
  {{ $featured_image_large := (trim $featured_image_large "/") | absURL }}
  <!-- <header class="cover bg-top bg-yellow" style="background-image: url('{{ $featured_image }}')"> -->
  <header class="cover bg-top bg-yellow">
      <picture>
        <source srcset="{{ $featured_image_large }}" media="(min-width: 1900px)">
        <source srcset="{{ $featured_image_medium }}" media="(min-width: 768px)">
        <source srcset="{{ $featured_image_small }}">
        <img src="{{ $featured_image_medium }}" alt="The Red Square">
      </picture>
    <div class="bg-black-50">
      {{ partial "site-navigation.html" .}}
      <div class="tc-l pv4 pv6-l ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 white mb0 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Site.Params.description }}
          <h2 class="fw1 f5 f3-l white measure-wide-l center mt3">
            {{ . }}
          </h2>
        {{ end }}
        <div class="pa4-l">
          <form id="search" class="bg-yellow mw7 center pa4 br2-ns ba b--black-10">
            <fieldset class="cf bn ma0 pa0">
              <legend class="pa0 f5 f4-ns mb3 black-80">Search. Just for fun. Or not.</legend>
              <div class="cf">
                <label class="clip" for="email-address">Search for:</label>
                <input class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns" placeholder="I would like to search forâ€¦" type="text" name="search-criteria" value="" id="search-criteria">
                <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" type="submit" value="Search">
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </header>
{{ else }}
  <header>
    <div class="pb3-m pb6-l {{ .Site.Params.background_color_class | default "bg-yellow" }}">
      {{ partial "site-navigation.html" . }}
      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>
{{ end }}
